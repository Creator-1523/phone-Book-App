<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PhoneBook</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-0evHe/X+R7YkIZDRvuzKMRqM+OrBnVFBL6DOitfPri4tjfHxaWutUpFmBp4vmVor" crossorigin="anonymous">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <!-- <script type="text/javascript" src="./test.js"></script> -->
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
    <style>
        .modal {
          display: none;
          position: fixed;
          z-index: 8;
          left: 0;
          top: 0;
          width: 100%;
          height: 100%;
          overflow: auto;
          background-color: rgb(0, 0, 0);
          background-color: rgba(0, 0, 0, 0.4);
        }
        .modal-content {
          margin: 50px auto;
          border: 1px solid #999;
          width: 60%;
        }
        h2,
        p {
          margin: 0 0 20px;
          font-weight: 400;
          color: #999;
        }
        span {
          color: #666;
          display: block;
          padding: 0 0 5px;
        }
        form {
          padding: 25px;
          margin: 25px;
          box-shadow: 0 2px 5px #f5f5f5;
          background: #eee;
        }
        input,
        textarea {
          /* width: 90%; */
          padding: 5px; 
          margin-bottom: 20px;
          border: 1px solid #1c87c9;
          outline: none;
        }
        .contact-form button {
          width: 100%;
          padding: 10px;
          border: none;
          background: #1c87c9;
          font-size: 16px;
          font-weight: 400;
          color: #fff;
        }
        button:hover {
          background: #2371a0;
        }
        .close {
          color: #aaa;
          float: right;
          font-size: 28px;
          font-weight: bold;
        }
        .close:hover,
        .close:focus {
          color: black;
          text-decoration: none;
          cursor: pointer;
        }
        /* button.button:hover {
          border-bottom: #a99567 1px solid;
          color: #a99567;
        } */
      </style>
</head>
<body>
    <br>
    <center>
        <h1>Phone Book App</h1>
    </center>
    <br>
    <br>
    <div>
        <div class="container">
            <div class="row">
              <div class="col">
                <h3>Contacts</h3>
              </div>
              <!-- <div class="col">
                Column
              </div> -->
              <div style="text-align: right;" class="col">
<!--                <h3><button type="submit" class="btn btn-primary" onclick="{{url_for('addcontacts')}}">+ Add Contacts</button></h3>-->
                  <button onclick="window.location.href='{{ url_for( "addcontacts" )}}';" type="submit"  class="btn btn-primary">+ Add Contacts</button>
                
                <!-- <center><h3>Add Contacts</h3></center> -->
              </div>
            </div>
          </div>
    </div>      
      <div style="margin-left: 5%;margin-right: 5%;"class="form-outline mb-4">
        <label class="form-label"></label>
         
      </div>
      <div class="container">
        <div class="row row-cols-4">
          <div class="col">Name</div>
          <div class="col"></div>
          <div class="col"></div>
          <div class="col">Delete Button</div>
          <span style="font-size: small; font-weight:100">Number</span>
        </div>
      </div>
      <div id="datatable">
    </div>
<!--  -->
<section class="pb-5 header text-center">
    <div class="container py-5 text-white">
        <header class="py-5">
            <h1 class="display-4">Bootstrap add, edit, delete buttons</h1>
            <p class="font-italic mb-1">Use bootstrap button variants to create call to action buttons inside a table, that's just for design, I'm sure you can make them work.</p>
            <p class="font-italic">Snippet by
                <a class="text-white" href="https://bootstrapious.com/">
                    <u>Bootstrapious</u>
                </a>
            </p>
        </header>


        <div class="row">
            <div class="col-lg-7 mx-auto">
                <div class="card border-0 shadow">
                    <div class="card-body p-5">

                        <!-- Responsive table -->
                        <div class="table-responsive">
                            <table class="table m-0">
                                <thead>
                                    <tr>
                                        <input type="search" class="form-control" id="datatable-search-input" placeholder="Search">
                                    </tr>
                                </thead>
                                <tbody>
                                {% set count = [] %}
                                {% for log in data %}
                                    {% set __ = count.append(1) %}
                                    <tr>
                                        <th scope="row">{{ count|length }}</th>
                                        <td id="{{ count|length }}">{{log[0]}} {{log[1]}} <br><span style="font-size: small; font-weight:100"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" fill="currentColor" class="bi bi-telephone" viewBox="0 0 16 16">
                                            <path d="M3.654 1.328a.678.678 0 0 0-1.015-.063L1.605 2.3c-.483.484-.661 1.169-.45 1.77a17.568 17.568 0 0 0 4.168 6.608 17.569 17.569 0 0 0 6.608 4.168c.601.211 1.286.033 1.77-.45l1.034-1.034a.678.678 0 0 0-.063-1.015l-2.307-1.794a.678.678 0 0 0-.58-.122l-2.19.547a1.745 1.745 0 0 1-1.657-.459L5.482 8.062a1.745 1.745 0 0 1-.46-1.657l.548-2.19a.678.678 0 0 0-.122-.58L3.654 1.328zM1.884.511a1.745 1.745 0 0 1 2.612.163L6.29 2.98c.329.423.445.974.315 1.494l-.547 2.19a.678.678 0 0 0 .178.643l2.457 2.457a.678.678 0 0 0 .644.178l2.189-.547a1.745 1.745 0 0 1 1.494.315l2.306 1.794c.829.645.905 1.87.163 2.611l-1.034 1.034c-.74.74-1.846 1.065-2.877.702a18.634 18.634 0 0 1-7.01-4.42 18.634 18.634 0 0 1-4.42-7.009c-.362-1.03-.037-2.137.703-2.877L1.885.511z"/>
                                          </svg> +91 {{log[2]}}</span></td>
                                        <td><i class="bi bi-telephone"></i></td>
                                        <td></td>
                                        <td>
                                            <!-- Call to action buttons -->
                                            <ul class="list-inline m-0">
                                                <li class="list-inline-item">
                                                    <!-- nclick="window.location.href='{{ url_for( "updatecontact" )}}';" -->
                                                    <!-- <button onclick="window.location.href='{{ url_for( "updatecontact" )}}';" type="submit"  class="btn btn-primary">+ Add Contacts</button> -->

                                                    <!-- <button onclick="uptdata({{ count|length }})" class="btn btn-success btn-sm rounded-0" type="button" data-toggle="tooltip" data-placement="top" title="Edit"><i class="fa fa-edit"></i></button> -->
                                                    <!-- <script>function trytest(){window.test={{ count|length }}}</script> -->
                                                    <button id="test" class="button"  data-modal="modalOne" class="btn btn-success btn-sm rounded-0" type="button" data-toggle="tooltip" data-placement="top" title="Edit"><i class="fa fa-edit"></i></button>

                                                </li>
                                                <li class="list-inline-item">
                                                    <button onclick="gprompt()" class="btn btn-danger btn-sm rounded-0" type="button" data-toggle="tooltip" data-placement="top" title="Delete"  type="submit"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-trash" viewBox="0 0 16 16">
                                                        <path d="M5.5 5.5A.5.5 0 0 1 6 6v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm2.5 0a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm3 .5a.5.5 0 0 0-1 0v6a.5.5 0 0 0 1 0V6z"/>
                                                        <path fill-rule="evenodd" d="M14.5 3a1 1 0 0 1-1 1H13v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V4h-.5a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1H6a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1h3.5a1 1 0 0 1 1 1v1zM4.118 4 4 4.059V13a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V4.059L11.882 4H4.118zM2.5 3V2h11v1h-11z"/>
                                                      </svg></button>
                                                </li>
                                            </ul>
                                        </td>
                                    </tr>
                                 {% endfor %}

                                </tbody>
                            </table>

                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>
{{sucess}}

  </div> -->
  <!-- <form method="post" id="post" action="{{url_for('updatecontact')}}">
    <p>What would you like to update</p>
    <div name="test" id="group">
    </div>
    <p id="output"></p>
    
    </form> -->
  <script>
//     function div_show() {
// document.getElementById('abc').style.display = "block";
// }
// //Function to Hide Popup
// function div_hide(){
// document.getElementById('abc').style.display = "none";
// }
      const sizes = ['First Name', 'Last Name', 'Mobile Number'];
    const button = document.querySelector('#test')
    button.addEventListener('click',(function(){console.log({{ count|length }})}))
      // generate the radio groups        
      const group = document.querySelector("#group");
      group.innerHTML = sizes.map((size) => `<div>
              <input type="radio" name="size" value="${size}" id="${size}">
               <label for="${size}">${size}</label>
          </div>`).join(' ');
      
      // add an event listener for the change event
      const radioButtons = document.querySelectorAll('input[name="size"]');
      for(const radioButton of radioButtons){
          radioButton.addEventListener('change', showSelected);
      }        
      
      function showSelected(e) {
          console.log(e);
          if (this.checked) {
              document.querySelector('#output').innerHTML = `Please enter new ${this.value} <input type = "text" name="name1">
              <button class="btn" onclick="uptdata({{ count|length }})" type="submit">Submit</button>`;
              console.log(this.value)
          }
      }
    
    let modalBtns = [...document.querySelectorAll(".button")]
    
    modalBtns.forEach(function (btn) {
      btn.onclick = function () {
        let modal = btn.getAttribute("data-modal");
        document.getElementById(modal).style.display = "block";
      };
    });
    let closeBtns = [...document.querySelectorAll(".close")];
    closeBtns.forEach(function (btn) {
      btn.onclick = function () {
        let modal = btn.closest(".modal");
        modal.style.display = "none";
      };
    });
    window.onclick = function (event) {
      if (event.target.className === "modal") {
        event.target.style.display = "none";
      }
    };

        // const sizes = ['First Name', 'Last Name', 'Mobile Number'];

        // // generate the radio groups        
        // const group = document.querySelector("#group");
        // group.innerHTML = sizes.map((size) => `<div>
        //         <input type="radio" name="size" value="${size}" id="${size}">
        //          <label for="${size}">${size}</label>
        //     </div>`).join(' ');
        
        // // add an event listener for the change event
        // const radioButtons = document.querySelectorAll('input[name="size"]');
        // for(const radioButton of radioButtons){
        //     radioButton.addEventListener('change', showSelected);
        // }        
        
        // function showSelected(e) {
        //     console.log(e);
        //     if (this.checked) {
        //         document.querySelector('#output').innerHTML = `Please enter new ${this.value} <input type = "text" name="name1">
        //         <input class="btn" type="submit" value="submit" onclick="uptdata({{ count|length }})" >`;
        //         console.log(this.value)
        //     }
        // }

    function gprompt(){
        // prompt()
        let confirmAction = confirm("Are you sure to execute this action?");
        // let confirmac=comfirm("Do you want to delete this contact");
        if (confirmAction){
            getdata({{ count|length }})
            location.reload()
        }
        else{
            console.log("Cancelled")
        }
    }
    // }
       function getdata(id)
    {
        const name = document.getElementById(id).innerText
        console.log(id)

        $.ajax({
            url: '{{ url_for("deletecontact") }}',
            type: 'POST',
            data: {
                name: name
            },
            success: function (response) {
            },
            error: function (response) {
            }
        });

    };
    function uptdata(id)
    {
        const name = document.getElementById(id).innerText
        console.log(name)
        console.log(id)
        $.ajax({
            url: '{{ url_for("updatecontact") }}',
            type: 'POST',
            data: {
                name: name
            },
            success: function (response) {
            },
            error: function (response) {
            }
        });
    location.reload()

    };
</script>


</body>
</html>